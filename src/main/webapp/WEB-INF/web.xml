<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee 
            http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">
        
   	<!-- SERVLETS -->
	<servlet>
    	<servlet-name>loginServlet</servlet-name>
    	<servlet-class>LoginServlet</servlet-class>
    	
		<init-param>
			<param-name>init</param-name>
			<param-value>login.jsp</param-value>
		</init-param>
		<init-param>
			<param-name>success</param-name>
			<param-value>secure/home.do</param-value>
		</init-param>    	
		<init-param>
			<param-name>fail</param-name>
			<param-value>login.do?error=1</param-value>
		</init-param> 	
	</servlet>
	<servlet-mapping>
    	<servlet-name>loginServlet</servlet-name>
    	<url-pattern>/login.do</url-pattern>
	</servlet-mapping>
	
	<servlet>
    	<servlet-name>registerServlet</servlet-name>
    	<servlet-class>RegisterServlet</servlet-class>
    	
		<init-param>
			<param-name>init</param-name>
			<param-value>register.jsp</param-value>
		</init-param>    	
	</servlet>
	<servlet-mapping>
    	<servlet-name>registerServlet</servlet-name>
    	<url-pattern>/register.do</url-pattern>
	</servlet-mapping>
	
	<servlet>
    	<servlet-name>demoServlet</servlet-name>
    	<servlet-class>DemoServlet</servlet-class>
    	
		<init-param>
			<param-name>success</param-name>
			<param-value>secure/home.do</param-value>
		</init-param>    	
		<init-param>
			<param-name>fail</param-name>
			<param-value>welcome.jsp</param-value>
		</init-param>    	
	</servlet>
	<servlet-mapping>
    	<servlet-name>demoServlet</servlet-name>
    	<url-pattern>/demo.do</url-pattern>
	</servlet-mapping>
	
	
	<servlet>
    	<servlet-name>logoutServlet</servlet-name>
    	<servlet-class>LogoutServlet</servlet-class>
    	
		<init-param>
			<param-name>success</param-name>
			<param-value>../welcome.jsp</param-value>
		</init-param>    	
	</servlet>
	<servlet-mapping>
    	<servlet-name>logoutServlet</servlet-name>
    	<url-pattern>/secure/logout.do</url-pattern>
	</servlet-mapping>
		
	<servlet>
    	<servlet-name>homeServlet</servlet-name>
    	<servlet-class>HomeServlet</servlet-class>
    	
		<init-param>
			<param-name>init</param-name>
			<param-value>home.jsp</param-value>
		</init-param>       	
		<init-param>
			<param-name>rest-url</param-name>
			<param-value>/web/rest/data.do</param-value>
		</init-param>       	
	</servlet>
	<servlet-mapping>
    	<servlet-name>homeServlet</servlet-name>
    	<url-pattern>/secure/home.do</url-pattern>
	</servlet-mapping>	
			
	<servlet>
    	<servlet-name>usersServlet</servlet-name>
    	<servlet-class>UsersServlet</servlet-class>
    	
		<init-param>
			<param-name>init</param-name>
			<param-value>users.jsp</param-value>
		</init-param>
		<init-param>
			<param-name>rest-url</param-name>
			<param-value>/web/rest/users.do</param-value>
		</init-param>       	
	</servlet>
	<servlet-mapping>
    	<servlet-name>usersServlet</servlet-name>
    	<url-pattern>/secure/users.do</url-pattern>
	</servlet-mapping>	
			
	<servlet>
    	<servlet-name>projectsServlet</servlet-name>
    	<servlet-class>ProjectsServlet</servlet-class>
    	
		<init-param>
			<param-name>init</param-name>
			<param-value>projects.jsp</param-value>
		</init-param>
		<init-param>
			<param-name>rest-url</param-name>
			<param-value>/web/rest/projects.do</param-value>
		</init-param>       	
	</servlet>
	<servlet-mapping>
    	<servlet-name>projectsServlet</servlet-name>
    	<url-pattern>/secure/projects.do</url-pattern>
	</servlet-mapping>	
			
	<servlet>
    	<servlet-name>activitiesServlet</servlet-name>
    	<servlet-class>ActivitiesServlet</servlet-class>
    	
		<init-param>
			<param-name>init</param-name>
			<param-value>activities.jsp</param-value>
		</init-param>
		<init-param>
			<param-name>rest-url</param-name>
			<param-value>/web/rest/activities.do</param-value>
		</init-param>       	
	</servlet>
	<servlet-mapping>
    	<servlet-name>activitiesServlet</servlet-name>
    	<url-pattern>/secure/activities.do</url-pattern>
	</servlet-mapping>	
	
			
	<servlet>
    	<servlet-name>restDataServlet</servlet-name>
    	<servlet-class>rest.RestDataServlet</servlet-class>
	</servlet>
	<servlet-mapping>
    	<servlet-name>restDataServlet</servlet-name>
    	<url-pattern>/rest/data.do</url-pattern>
	</servlet-mapping>	
				
	<servlet>
    	<servlet-name>restUserServlet</servlet-name>
    	<servlet-class>rest.RestUserServlet</servlet-class>
	</servlet>
	<servlet-mapping>
    	<servlet-name>restUserServlet</servlet-name>
    	<url-pattern>/rest/users.do</url-pattern>
	</servlet-mapping>	
				
	<servlet>
    	<servlet-name>restProjectServlet</servlet-name>
    	<servlet-class>rest.RestProjectServlet</servlet-class>
	</servlet>
	<servlet-mapping>
    	<servlet-name>restProjectServlet</servlet-name>
    	<url-pattern>/rest/projects.do</url-pattern>
	</servlet-mapping>	
				
	<servlet>
    	<servlet-name>restActivityServlet</servlet-name>
    	<servlet-class>rest.RestActivityServlet</servlet-class>
	</servlet>
	<servlet-mapping>
    	<servlet-name>restActivityServlet</servlet-name>
    	<url-pattern>/rest/activities.do</url-pattern>
	</servlet-mapping>
	
	
   	<!-- FILTERS -->
	<filter>
		<filter-name>loginFilter</filter-name>
		<filter-class>filters.LoginFilter</filter-class>
	</filter>
	<filter>
		<filter-name>CharacterEncodingFilter</filter-name>
		<filter-class>filters.CharacterEncodingFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>loginFilter</filter-name>
		<url-pattern>/secure/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>CharacterEncodingFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	
   	<!-- ERRORS -->
	<error-page>
	    <error-code>401</error-code>
    	<location>/login.do</location>
	</error-page>
	<error-page>
    	<error-code>403</error-code>
    	<location>/error403.jsp</location>
	</error-page>	
	<error-page>
    	<error-code>404</error-code>
    	<location>/error404.jsp</location>
	</error-page>
	
	<error-page>
	    <exception-type>java.lang.Exception</exception-type>
    	<location>/error.do</location>
	</error-page>
	
	
    <!-- SMTP settings -->
    <context-param>
        <param-name>smtpHost</param-name>
        <param-value>smtp.gmail.com</param-value>
    </context-param> 
    <context-param>
        <param-name>smtpPort</param-name>
        <param-value>587</param-value>
    </context-param> 
    <context-param>
        <param-name>smtpUser</param-name>
        <param-value>info@timereport.ru</param-value>
    </context-param> 
    <context-param>
        <param-name>smtpPass</param-name>
        <param-value></param-value>
    </context-param>
    
	<welcome-file-list>
    	<welcome-file>welcome.jsp</welcome-file>
	</welcome-file-list>
	
</web-app>
